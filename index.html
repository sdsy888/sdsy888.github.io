<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="en">
<head>
  <!-- hexo-inject:begin --><!-- hexo-inject:end --><meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge"/>
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2"/>
<meta name="theme-color" content="#222"/>


























<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2"/>

<link rel="stylesheet" href="/css/main.css?v=7.0.1"/>


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.0.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.0.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.0.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.0.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta name="description" content="Interested inDeep Learning &amp; Computer Vision">
<meta property="og:type" content="website">
<meta property="og:title" content="Neo&#39;s Blog">
<meta property="og:url" content="https://sdsy888.github.io/index.html">
<meta property="og:site_name" content="Neo&#39;s Blog">
<meta property="og:description" content="Interested inDeep Learning &amp; Computer Vision">
<meta property="og:locale" content="en_US">
<meta property="article:author" content="江前云后">
<meta name="twitter:card" content="summary">






  <link rel="canonical" href="https://sdsy888.github.io/"/>



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>Neo's Blog</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

<meta name="generator" content="Hexo 4.2.0"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head>

<body itemscope itemtype="http://schema.org/WebPage" lang="en">

  
  
    
  

  <!-- hexo-inject:begin --><!-- hexo-inject:end --><div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">Neo's Blog</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
      
        <p class="site-subtitle">“生活就是个缓慢受锤的过程”, 只是有的人像铁, 有的人像牛,有的人像铁牛...</p>
      
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="Toggle navigation bar">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br/>Home</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br/>About</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br/>Archives</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-categories">

    
    
    
      
    

    

    <a href="/categories/" rel="section"><i class="menu-item-icon fa fa-fw fa-th"></i> <br/>Categories</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br/>Tags</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E9%9A%8F%E7%AC%94-Writing/PyCharm%E6%9B%B4%E6%96%B0package%E7%BB%93%E6%9E%84%EF%BC%8C%E8%A7%A3%E5%86%B3unresolved-Reference%E9%97%AE%E9%A2%98/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E9%9A%8F%E7%AC%94-Writing/PyCharm%E6%9B%B4%E6%96%B0package%E7%BB%93%E6%9E%84%EF%BC%8C%E8%A7%A3%E5%86%B3unresolved-Reference%E9%97%AE%E9%A2%98/" class="post-title-link" itemprop="url">PyCharm更新package结构，解决unresolved Reference问题</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-06-27 16:29:48 / Modified: 16:33:20" itemprop="dateCreated datePublished" datetime="2020-06-27T16:29:48-05:00">2020-06-27</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">298</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>Pycharm在更新某个包文件后，interpreter不会自动更新skeleton，导致import刚安装的package的时候会出现“unresolved Reference”错误。</p>
<p>解决方案:在<code>File-setting-python interpreter</code>中进行操作：<br><img src="https://intellij-support.jetbrains.com/hc/user_images/aZLr7g3OSO8aG-x22VYJHA.png" alt=""></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><p><a href="https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000738804-How-to-update-skeletons-remote-interpreter?page=1#community_comment_115000623624" target="_blank" rel="noopener">https://intellij-support.jetbrains.com/hc/en-us/community/posts/115000738804-How-to-update-skeletons-remote-interpreter?page=1#community_comment_115000623624</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/Framework/RuntimeError-invalid-argument-5-k-not-in-range-for-dimension-at/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/Framework/RuntimeError-invalid-argument-5-k-not-in-range-for-dimension-at/" class="post-title-link" itemprop="url">RuntimeError: invalid argument 5: k not in range for dimension at...</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-05-23 14:08:30 / Modified: 14:15:57" itemprop="dateCreated datePublished" datetime="2020-05-23T14:08:30-05:00">2020-05-23</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/Framework/" itemprop="url" rel="index"><span itemprop="name">Framework</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">297</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="问题根源"><a href="#问题根源" class="headerlink" title="问题根源"></a>问题根源</h1><p>这种情况往往出现在使用pytorch训练模型过程中，调用<code>topk</code>方法的时候。问题根源是，传入的参数超过了该dimension的限制。<br>例如tmp的shape是<code>[4,128,1]</code>,而调用了<code>tmp.topk(129,dim=1)</code>,显然129&gt;128是不合理的。</p>
<p>另一种可能是，dataloader在load数据的时候，最后一个batch只剩了一个1个数据，而由于某些<code>squeeze</code>的操作导致传回的结果d的shape不是<code>[1,128,1]</code>,而是<code>[1,128]</code>或者<code>[128]</code>。这种情况下，出现了和上面相同的错误。</p>
<p>总之，这种错误肯定是由于传入的参数大于给定的dimension的总数据量。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/%E5%B7%A5%E5%85%B7-Tools/%E9%9A%8F%E7%AC%94-Writing/pytorch%E5%8F%AAload%E9%83%A8%E5%88%86%E7%BD%91%E7%BB%9C%E5%8F%82%E6%95%B0/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/%E5%B7%A5%E5%85%B7-Tools/%E9%9A%8F%E7%AC%94-Writing/pytorch%E5%8F%AAload%E9%83%A8%E5%88%86%E7%BD%91%E7%BB%9C%E5%8F%82%E6%95%B0/" class="post-title-link" itemprop="url">pytorch只load部分网络参数</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-05-04 18:52:36" itemprop="dateCreated datePublished" datetime="2020-05-04T18:52:36-05:00">2020-05-04</time>
            

            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">机器学习 / Machine Learning</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/" itemprop="url" rel="index"><span itemprop="name">框架 / Framework</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/%E5%B7%A5%E5%85%B7-Tools/" itemprop="url" rel="index"><span itemprop="name">工具 / Tools</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/%E5%B7%A5%E5%85%B7-Tools/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">0</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E5%B7%A5%E5%85%B7-Tools/2020/Nvidia-GPU%E9%A3%8E%E6%89%87%E8%BD%AC%E9%80%9F%E8%87%AA%E5%8A%A8%E8%B0%83%E8%8A%82/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E5%B7%A5%E5%85%B7-Tools/2020/Nvidia-GPU%E9%A3%8E%E6%89%87%E8%BD%AC%E9%80%9F%E8%87%AA%E5%8A%A8%E8%B0%83%E8%8A%82/" class="post-title-link" itemprop="url">Nvidia GPU风扇转速自动调节</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-05-03 15:05:39" itemprop="dateCreated datePublished" datetime="2020-05-03T15:05:39-05:00">2020-05-03</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-05-04 04:11:28" itemprop="dateModified" datetime="2020-05-04T04:11:28-05:00">2020-05-04</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E5%B7%A5%E5%85%B7-Tools/" itemprop="url" rel="index"><span itemprop="name">工具 / Tools</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">614</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="Nvidia风扇速度自动调节工具推荐"><a href="#Nvidia风扇速度自动调节工具推荐" class="headerlink" title="Nvidia风扇速度自动调节工具推荐"></a>Nvidia风扇速度自动调节工具推荐</h1><p>众所周知，nvidia自家的GPU设定工具<code>nvidia-settings</code>的风扇转速调节功能实在难用。</p>
<ul>
<li>如果使用转速自动调节模式，GPU风扇的转速跟不上散热需求变化。往往GPU温度已经70~80度了，风扇转速还是停留在40%左右的速度，温度降不下来。</li>
<li>如果使用手动转速调节模式，首先要通过改变一堆<code>coolbits</code>打开手动调节功能（可搜索调节nvidia gpu风扇转速文章），然后在<code>nvidia-settings</code>中打开手动调节开关，再通过拖动风扇转速百分比进度条实现任意调速。这种方法也是过去我一直在使用的解决办法，但是这个方法的最大问题就是不够灵活，通常都是等模型训练起来了然后手动拉高转速降温，等训练完成再手动拉低转速减少耗电和超大的风扇噪音。</li>
</ul>
<h1 id="灵活而又省力的解决办法"><a href="#灵活而又省力的解决办法" class="headerlink" title="灵活而又省力的解决办法"></a>灵活而又省力的解决办法</h1><p>首推一个开源的且支持pip安装的风扇调节工具：<a href="https://github.com/andyljones/coolgpus" target="_blank" rel="noopener">https://github.com/andyljones/coolgpus</a>. 两行命令搞定自动设定GPU转速按需调节：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># 安装工具包</span><br><span class="line">pip install coolgpus</span><br></pre></td></tr></table></figure><br>设定与温度对应的转速调节策略：下面的命令的意思是，当GPU温度从15度变化到85度时，风扇转速从20%线性增加到90%，即随着温度升高，转速随之增加，并且增加到什么程度完全自己手动控制，完美。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo $(which coolgpus) --temp 15 80 --speed 20 95</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E9%9A%8F%E7%AC%94-Writing/2020/Graph%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E7%9A%84%E7%90%86%E8%A7%A3/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E9%9A%8F%E7%AC%94-Writing/2020/Graph%E7%9B%B8%E5%85%B3%E5%9F%BA%E7%A1%80%E6%A6%82%E5%BF%B5%E7%9A%84%E7%90%86%E8%A7%A3/" class="post-title-link" itemprop="url">Graph相关基础概念的理解</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-04-04 19:55:36" itemprop="dateCreated datePublished" datetime="2020-04-04T19:55:36-05:00">2020-04-04</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-04-07 23:17:33" itemprop="dateModified" datetime="2020-04-07T23:17:33-05:00">2020-04-07</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">1.5k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="度-自由度的理解"><a href="#度-自由度的理解" class="headerlink" title="度 / 自由度的理解"></a>度 / 自由度的理解</h1><ul>
<li>度（degree）/ 自由度，也叫valency（直译化合价），是指Graph(图)中一个节点，有多少条边连接其上。</li>
<li>图的度是其所有节点的度中最大值。对于“度”的理解，结合自由度，和化合价这个英文原词来理解，本意应该是衡量一个节点与外界连通性的度量。</li>
<li><p>例如在计算二阶导数时</p>
<ul>
<li>一元函数（一维函数）其公式如下，直观上可以理解为：其二阶导数等于其在所有自由度上微扰之后获得的增益。一维函数其自由度可以理解为2，分别是+1方向和-1方向.</li>
</ul>
<script type="math/tex; mode=display">\begin{aligned} f^{\prime \prime}(x) = \frac{\partial^2 f(x)}{\partial x^2} &= f^{\prime}(x)-f^{\prime}(x-1) \\ &= f(x+1) - f(x) - (f(x) - f(x-1)) \\ &= f(x+1) + f(x-1) - 2f(x) \\ &= [f(x+1) - f(x)] + [f(x-1) - f(x)] \end{aligned}</script><ul>
<li>二元函数（二维函数）其二阶导数如下，直观理解时可以类比二维图像（二维图像可以看做特殊形式的二维函数），类似一维函数的二阶导数，只是二维函数的自由度更多（用于计算函数二阶导数的方向），下面公式包含了4个自由度，$(1, 0), (-1,0), (0, 1), (0, -1)$.</li>
</ul>
<script type="math/tex; mode=display">\begin{aligned} (\Delta f)_{x,y} &= \frac{\partial f(x,y)}{\partial x^2} + \frac{\partial f(x,y)}{\partial y^2} \\ &\approx f(x+1,y) + f(x-1,y) - 2f(x,y) + f(x, y+1)+f(x,y-1)-2f(x,y)  \\ & = f(x+1,y) + f(x-1,y) + f(x, y+1)+f(x,y-1)-4f(x,y) \\ &= [f(x+1,y) - f(x,y)]+[f(x-1,y) - f(x,y)]+[f(x,y+1) - f(x,y)]+[f(x,y-1) - f(x,y)] \end{aligned}</script><ul>
<li>参考链接1，其实《数字图像处理》书中对于二阶导数的定义也是考虑到了8个自由度。<blockquote>
<p>(对于图像的二阶导数)还可以任意的定义自由度，比如对角线也算的话，就是8个自由度。在卷积时，使用的拉普拉斯模板就对应着1种方式的自由度定义</p>
</blockquote>
</li>
</ul>
</li>
</ul>
<p>综上，度的概念，虽然对于不同对象有不同的具体定义，但是直觉上理解，我认为是函数上的某点，或者Graph上某点与其周边环境（邻接的点）的连通程度。一维函数上一点只能向左或者向右移动，因此度是2；二维函数可以向左右上下，甚至左上右下移动，因此度可以是4，8，甚至自定义更多；对于Graph上的节点node而言，其度就是连接到该节点的边的数量，同样是代表了这个节点连接到了多少个其他节点。</p>
<p>最后补充，这种直观上的理解对于进一步理解拉普拉斯算子（尤其是Graph上的拉普拉斯算子）有很大帮助，如链接1中提到的：</p>
<blockquote>
<p>这给我们一种形象的结论：拉普拉斯算子就是在所有自由度上进行微小变化后获得的增益 (另一种说明，Informally, the Laplacian measures how different the value of f at p is from the average value of the neighbors)。</p>
</blockquote>
<h1 id="参考："><a href="#参考：" class="headerlink" title="参考："></a>参考：</h1><ol>
<li><a href="http://xtf615.com/2019/02/24/gcn/" target="_blank" rel="noopener">http://xtf615.com/2019/02/24/gcn/</a></li>
</ol>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E6%A1%86%E6%9E%B6-Framework/2020/PyTorch%E4%B8%AD%E7%9A%84loss-step%E5%92%8Coptimizer-backward%E5%8C%BA%E5%88%AB/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E6%A1%86%E6%9E%B6-Framework/2020/PyTorch%E4%B8%AD%E7%9A%84loss-step%E5%92%8Coptimizer-backward%E5%8C%BA%E5%88%AB/" class="post-title-link" itemprop="url">PyTorch中的loss.backward()和optimizer.step()区别</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-03-10 14:22:04" itemprop="dateCreated datePublished" datetime="2020-03-10T14:22:04-05:00">2020-03-10</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-05-25 19:48:40" itemprop="dateModified" datetime="2020-05-25T19:48:40-05:00">2020-05-25</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%A1%86%E6%9E%B6-Framework/" itemprop="url" rel="index"><span itemprop="name">框架 / Framework</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">796</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="一句话解释"><a href="#一句话解释" class="headerlink" title="一句话解释"></a>一句话解释</h1><p>loss.backward()作用是将当前GPU储存gradient的计算图反传；optimizer.step()是利用计算图中储存的gradient更新网络参数。</p>
<h1 id="关于累加loss"><a href="#关于累加loss" class="headerlink" title="关于累加loss"></a>关于累加loss</h1><h3 id="一句话解释，n个backward使用一个step"><a href="#一句话解释，n个backward使用一个step" class="headerlink" title="一句话解释，n个backward使用一个step"></a>一句话解释，n个backward使用一个step</h3><h3 id="详解"><a href="#详解" class="headerlink" title="详解"></a>详解</h3><p>假如想要使用batch size（bs）为100训练模型，但是老黄卖的大memeory的卡太贵了，只能fit进batch size为10的数据，那怎么办呢？</p>
<p>在PyTorch中可以这样搞：使用10的bs对网络进行<code>forward</code>10次，每次都调用<code>loss.backward()</code>,但是每10次<code>forward</code>才调用一次<code>optimizer.step()</code>,这样就实现了batch size为100的效果。其原理就是step和bachward的区别。</p>
<h3 id="小坑预警"><a href="#小坑预警" class="headerlink" title="小坑预警"></a>小坑预警</h3><p>pytorch中，网络每次forward都会生成一次计算图用于存储gradient，因此<strong>必须</strong>每次forward之后调用loss.bachward()反传以及清空当前计算图，否则多次forward不反传会在GPU中累加计算图，导致GPU内存不够。</p>
<h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><ul>
<li><a href="https://www.cnblogs.com/lart/p/11628696.html" target="_blank" rel="noopener">https://www.cnblogs.com/lart/p/11628696.html</a></li>
<li><a href="https://discuss.pytorch.org/t/why-do-we-need-to-set-the-gradients-manually-to-zero-in-pytorch/4903/22" target="_blank" rel="noopener">半官方解释</a></li>
<li><a href="https://discuss.pytorch.org/t/how-are-optimizer-step-and-loss-backward-related/7350" target="_blank" rel="noopener">https://discuss.pytorch.org/t/how-are-optimizer-step-and-loss-backward-related/7350</a></li>
<li><a href="https://discuss.pytorch.org/t/pytorch-gradient-accumulation/55955" target="_blank" rel="noopener">https://discuss.pytorch.org/t/pytorch-gradient-accumulation/55955</a></li>
<li><a href="https://medium.com/huggingface/training-larger-batches-practical-tips-on-1-gpu-multi-gpu-distributed-setups-ec88c3e51255" target="_blank" rel="noopener">https://medium.com/huggingface/training-larger-batches-practical-tips-on-1-gpu-multi-gpu-distributed-setups-ec88c3e51255</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E9%9A%8F%E7%AC%94-Writing/2020/%E4%B8%80%E4%BA%9BPyTorch%E4%B8%8Enumpy%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E9%9A%8F%E7%AC%94-Writing/2020/%E4%B8%80%E4%BA%9BPyTorch%E4%B8%8Enumpy%E7%9A%84%E5%B0%8F%E7%BB%86%E8%8A%82/" class="post-title-link" itemprop="url">一些PyTorch小细节</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-03-09 15:50:03" itemprop="dateCreated datePublished" datetime="2020-03-09T15:50:03-05:00">2020-03-09</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-04-24 01:50:50" itemprop="dateModified" datetime="2020-04-24T01:50:50-05:00">2020-04-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">521</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="dataset的数据长度问题"><a href="#dataset的数据长度问题" class="headerlink" title="dataset的数据长度问题"></a>dataset的数据长度问题</h3><ul>
<li>调用构建的<code>my_dataset.__len__()</code>获取的是数据的原始长度，比如一共有1000张图像，返回的就是1000</li>
<li>使用<code>len(my_dataloader)</code>返回的是batch的数量，比如1000张图像，使用batchsize为8，那么返回的就是250.</li>
</ul>
<h2 id="numpy-squeeze返回值类型"><a href="#numpy-squeeze返回值类型" class="headerlink" title="numpy.squeeze返回值类型"></a>numpy.squeeze返回值类型</h2><p>对<code>ndarray</code>使用squeeze之后，其返回值是tuple类型，如果将这个类型的数据返回给pytorch的<code>__getitem__</code>方法，则最后dataset返回的数据类型为list，而不是一个<code>torch.Tensor</code>数据类型。</p>
<p>只有将<code>ndarray</code>数据类型返回给<code>__getitem__</code>，最后dataloader返回的数据类型才能自动转为<code>torch.Tensor</code>;</p>
<p>此外，函数返回值是一个ndarray和一个[]类型时，如果只用一个参数接收，那么会两个参数总体变成一个tuple。道理也非常简单，就是函数的多个返回值是个tuple中的多个元素。</p>
<h1 id="Ref"><a href="#Ref" class="headerlink" title="Ref"></a>Ref</h1><ul>
<li>数据长度：， data<a href="https://discuss.pytorch.org/t/what-is-len-dataloader-equal-to/52472/2" target="_blank" rel="noopener">https://discuss.pytorch.org/t/what-is-len-dataloader-equal-to/52472/2</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/2020/%E5%A4%9AGPU%E8%BF%90%E8%A1%8CPyTorch%E6%8A%A5%E9%94%99dimension-specified-as-0-but-tensor-has-no-dimensions/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/2020/%E5%A4%9AGPU%E8%BF%90%E8%A1%8CPyTorch%E6%8A%A5%E9%94%99dimension-specified-as-0-but-tensor-has-no-dimensions/" class="post-title-link" itemprop="url">多GPU运行PyTorch报错dimension specified as 0 but tensor has no dimensions</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-02-24 13:17:53 / Modified: 13:22:18" itemprop="dateCreated datePublished" datetime="2020-02-24T13:17:53-06:00">2020-02-24</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/" itemprop="url" rel="index"><span itemprop="name">机器学习 / Machine Learning</span></a></span>

                
                
                  , 
                
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E6%9C%BA%E5%99%A8%E5%AD%A6%E4%B9%A0-Machine-Learning/%E6%A1%86%E6%9E%B6-Framework/" itemprop="url" rel="index"><span itemprop="name">框架 / Framework</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">288</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h1 id="错误信息"><a href="#错误信息" class="headerlink" title="错误信息"></a>错误信息</h1><blockquote>
<p>dimension specified as 0 but tensor has no dimensions</p>
</blockquote>
<h1 id="问题原因"><a href="#问题原因" class="headerlink" title="问题原因"></a>问题原因</h1><p>CrossEntropyLoss的输入必须为tensor，不能为scalar（标量），即输入的数据维度不能为<code>None</code>.</p>
<h1 id="解决办法"><a href="#解决办法" class="headerlink" title="解决办法"></a>解决办法</h1><p>使用<code>view</code>方法改变维度为1，如<code>target = target.view(-1)</code>,这样假如原来target是<code>1</code>,使用后变为<code>[1]</code>,维度从None变为1.</p>
<p>Problem Sovled.</p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://blog.csdn.net/weixin_43380510/article/details/89173892" target="_blank" rel="noopener">https://blog.csdn.net/weixin_43380510/article/details/89173892</a></li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E9%9A%8F%E7%AC%94-Writing/2020/%E4%BD%BF%E7%94%A8Shapely%E8%AE%A1%E7%AE%97Polygon%E7%9A%84intersection%E6%8A%A5%E9%94%99/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E9%9A%8F%E7%AC%94-Writing/2020/%E4%BD%BF%E7%94%A8Shapely%E8%AE%A1%E7%AE%97Polygon%E7%9A%84intersection%E6%8A%A5%E9%94%99/" class="post-title-link" itemprop="url">使用Shapely中Polygon的intersection方法报错 TopologyException: Input geom 1 is invalid: Ring Self-intersection...</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-02-21 01:12:03" itemprop="dateCreated datePublished" datetime="2020-02-21T01:12:03-06:00">2020-02-21</time>
            

            
              

              
                
                <span class="post-meta-divider">|</span>
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Edited on</span>
                
                <time title="Modified: 2020-02-24 13:39:50" itemprop="dateModified" datetime="2020-02-24T13:39:50-06:00">2020-02-24</time>
              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">1.7k</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">2 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <h1 id="报错信息"><a href="#报错信息" class="headerlink" title="报错信息"></a>报错信息</h1><p>使用shapely的Polygon类构建的多边形计算intersection的时候遇到如下报错：<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">TopologyException: Input geom 1 is invalid: Ring Self-intersection at or near point...</span><br></pre></td></tr></table></figure></p>
<h1 id="错误原因"><a href="#错误原因" class="headerlink" title="错误原因"></a>错误原因</h1><p>给出的Polygon中包含了一个所谓的<code>self intersection</code>，根据报错和网上信息怀疑是因为多边形本身有重叠的部分（同一个多边形自己内部有个小多边形），示意图如下这种，大的多边形中间因为给定的坐标顺序的缘故，导致内部产生了包含其中的一个多边形。</p>
<p><img src="../image/self-intesect-polygon.jpg" alt="self-intersection多边形示意"></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/%E9%9A%8F%E7%AC%94-Writing/2020/%E4%BD%BF%E7%94%A8Shapely%E8%AE%A1%E7%AE%97Polygon%E7%9A%84intersection%E6%8A%A5%E9%94%99/#more" rel="contents">
                Read more &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="https://sdsy888.github.io/%E9%9A%8F%E7%AC%94-Writing/2020/%E3%80%90%E5%B0%8F%E8%AE%B0%E3%80%91%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E8%BF%98%E6%98%AF%E5%8E%9F%E8%A3%85API%E5%A5%BD%E7%94%A8/"/>

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="江前云后"/>
      <meta itemprop="description" content="Interested in<br>Deep Learning & Computer Vision"/>
      <meta itemprop="image" content="/images/avatar.jpeg"/>
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="Neo's Blog"/>
    </span>

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
                
                
                <a href="/%E9%9A%8F%E7%AC%94-Writing/2020/%E3%80%90%E5%B0%8F%E8%AE%B0%E3%80%91%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98%E8%BF%98%E6%98%AF%E5%8E%9F%E8%A3%85API%E5%A5%BD%E7%94%A8/" class="post-title-link" itemprop="url">【小记】解决问题还是原装API好用</a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            
              <span class="post-meta-item-icon">
                <i class="fa fa-calendar-o"></i>
              </span>
              
                <span class="post-meta-item-text">Posted on</span>
              

              
                
              

              <time title="Created: 2020-02-07 14:10:48 / Modified: 14:24:19" itemprop="dateCreated datePublished" datetime="2020-02-07T14:10:48-06:00">2020-02-07</time>
            

            
              

              
            
          </span>

          
            <span class="post-category">
            
              <span class="post-meta-divider">|</span>
            
              <span class="post-meta-item-icon">
                <i class="fa fa-folder-o"></i>
              </span>
              
                <span class="post-meta-item-text">In</span>
              
              
                <span itemprop="about" itemscope itemtype="http://schema.org/Thing"><a href="/categories/%E9%9A%8F%E7%AC%94-Writing/" itemprop="url" rel="index"><span itemprop="name">随笔 / Writing</span></a></span>

                
                
              
            </span>
          

          
            
            
          

          
          

          

          
            <div class="post-symbolscount">
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Symbols count in article: </span>
                
                <span title="Symbols count in article">390</span>
              

              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-clock-o"></i>
                </span>
                
                  <span class="post-meta-item-text">Reading time &asymp;</span>
                
                <span title="Reading time">1 mins.</span>
              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>很久以前，上算法课的时候猛然发现，原来所谓的“大部头”的真实含义不是难的让人头大，而是讲解深入浅出、容易理解，所以才会变成厚厚一本“大部头”。可是人总是在一次次重蹈覆辙中强化学习经验——最近在搞定一个小的技术问题时又猛然发现，查十个CSDN也不如看原装API来的清晰快速。</p>
<p>虽然自认为英语阅读能力也不差，但是一直在潜意识中还是规避去查英文资料，总想尽量先查中文资料以便快速解决问题。可现实情况往往是，查完一个中文博客解决不了问题，又查一个，又查一个，又一个…</p>
<p>等到解决了问题还不一定能发现，其实比去读原装官方API多花了更多时间——我倒完全没有认为英文博客就一定比中文博客好，二是说官方出的API一定比99%的中英文博客更好理解问题，更快速引入实用中——而剩下的1%，要么是中英文民间资料写的太优秀，比如stackoverflow，要么是官方API写的一言难尽，比如某Flow。</p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><span class="space">&hellip;</span><a class="page-number" href="/page/6/">6</a><a class="extend next" rel="next" href="/page/2/">&lt;i class&#x3D;&quot;fa fa-angle-right&quot; aria-label&#x3D;&quot;Next page&quot;&gt;&lt;&#x2F;i&gt;</a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image"
                src="/images/avatar.jpeg"
                alt="江前云后"/>
            
              <p class="site-author-name" itemprop="name">江前云后</p>
              <div class="site-description motion-element" itemprop="description">Interested in<br>Deep Learning & Computer Vision</div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/%20%7C%7C%20archive">
                
                    <span class="site-state-item-count">55</span>
                    <span class="site-state-item-name">posts</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-categories">
                  
                    
                      <a href="/categories/%20%7C%7C%20th">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">13</span>
                    <span class="site-state-item-name">categories</span>
                  </a>
                </div>
              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/%20%7C%7C%20tags">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">tags</span>
                  </a>
                </div>
              
            </nav>
          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://github.com/sdsy888" title="GitHub &rarr; https://github.com/sdsy888" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i>GitHub</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="https://www.zhihu.com/people/jiang-qian-yun-hou" title="zhihu &rarr; https://www.zhihu.com/people/jiang-qian-yun-hou" rel="noopener" target="_blank"><i class="fa fa-fw fa-heart-o"></i>zhihu</a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                    
                  
                  
                    
                  
                  <a href="http://weibo.com/ghostleader" title="Weibo &rarr; http://weibo.com/ghostleader" rel="noopener" target="_blank"><i class="fa fa-fw fa-weibo"></i>Weibo</a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2020</span>
  <span class="with-love" id="animate">
    <i class="fa fa-user"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">江前云后</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
    <span title="Symbols count total">47k</span>
  

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-coffee"></i>
    </span>
    
    <span title="Reading time total">43 mins.</span>
  
</div>


  <div class="powered-by">Powered by <a href="https://hexo.io" class="theme-link" rel="noopener" target="_blank">Hexo</a> v4.2.0</div>



  <span class="post-meta-divider">|</span>



  <div class="theme-info">Theme – <a href="https://theme-next.org" class="theme-link" rel="noopener" target="_blank">NexT.Pisces</a> v7.0.1</div>




        
<div class="busuanzi-count">
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>

  
    <span class="post-meta-item-icon">
      <i class="fa fa-user"></i>
    </span>
    <span class="site-uv" title="Total Visitors">
      <span class="busuanzi-value" id="busuanzi_value_site_uv"></span>
    </span>
  

  
    <span class="post-meta-divider">|</span>
  

  
    <span class="post-meta-item-icon">
      <i class="fa fa-eye"></i>
    </span>
    <span class="site-pv" title="Total Views">
      <span class="busuanzi-value" id="busuanzi_value_site_pv"></span>
    </span>
  
</div>









        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>


























  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/src/utils.js?v=7.0.1"></script>

  <script src="/js/src/motion.js?v=7.0.1"></script>



  
  


  <script src="/js/src/affix.js?v=7.0.1"></script>

  <script src="/js/src/schemes/pisces.js?v=7.0.1"></script>



  

  


  <script src="/js/src/next-boot.js?v=7.0.1"></script>


  

  

  

  



  




  

  

  
  

  
  
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
      
    
  

  
    
      <script type="text/x-mathjax-config">
  

  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$', '$'], ['\\(', '\\)'] ],
      processEscapes: true,
      skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
    },
    TeX: {
      
      equationNumbers: {
        autoNumber: 'AMS'
      }
    }
  });
  MathJax.Hub.Register.StartupHook('TeX Jax Ready', function() {
    MathJax.InputJax.TeX.prefilterHooks.Add(function(data) {
      if (data.display) {
        var next = data.script.nextSibling;
        while (next && next.nodeName.toLowerCase() === '#text') { next = next.nextSibling }
        if (next && next.nodeName.toLowerCase() === 'br') { next.parentNode.removeChild(next) }
      }
    });
  });
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for (i = 0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>
<script src="//cdn.jsdelivr.net/npm/mathjax@2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

<style>
.MathJax_Display {
  overflow-x: scroll;
  overflow-y: hidden;
}
</style><!-- hexo-inject:begin --><!-- Begin: Injected MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({"tex2jax":{"inlineMath":[["$","$"],["\\(","\\)"]],"skipTags":["script","noscript","style","textarea","pre","code"],"processEscapes":true},"TeX":{"equationNumbers":{"autoNumber":"AMS"}}});
</script>

<script type="text/x-mathjax-config">
  MathJax.Hub.Queue(function() {
    var all = MathJax.Hub.getAllJax(), i;
    for(i=0; i < all.length; i += 1) {
      all[i].SourceElement().parentNode.className += ' has-jax';
    }
  });
</script>

<script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js">
</script>
<!-- End: Injected MathJax -->
<!-- hexo-inject:end -->

    
  


  

  

  

  

  

  

  

  

  

</body>
</html>
